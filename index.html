from flask import Flask, render_template, request

app = Flask(__name__)

# Define the questions and their respective elements
element_questions = {
    "Wood": [
        "Does your child enjoy trying new things and taking on challenges?",
        "Does your child learn physically?",
        "Does your child twitch and squirm?",
        "Does your child dislike being told what to do or feeling restricted?",
        "Does your child love the thrill of danger?",
        "Does your child have recurrent bed wetting?",
        "Does your child often show overconfidence or not want help from others?",
        "Does your child have explosive anger when upset?",
        "Does your child crave stimulants like sugar, soda, or butter?"
    ],
    "Fire": [
        "Does your child love being around other people and enjoy attention?",
        "Does your child often change moods quickly?",
        "Does your child have difficulty falling asleep?",
        "Does your child get distracted easily by changes around them?",
        "Is your child easily panicked or upset by small issues?",
        "Does your child complain of being bored often?",
        "Does your child tend to act impulsively or unpredictably?",
        "Does your child get flushed or sweat a lot?",
        "Does your child experience diarrhea or stomach discomfort often?",
        "Does your child crave sweets, spicy food, or ice?"
    ],
    "Earth": [
        "Is your child caring and always thinking about others?",
        "Does your child overeat?",
        "Does your child prefer being with other people, rather than alone?",
        "Does your child have trouble setting boundaries or respecting personal space?",
        "Does your child feel anxious when away from loved ones or when not feeling accepted?",
        "Is your child sometimes whiny, needy, or clingy?",
        "Is your child disorganized?",
        "Does your child often socialize excessively?",
        "Does your child crave sweets and carbohydrates like sugar or bread?",
        "Does your child have stomach aches or indigestion?"
    ],
    "Metal": [
        "Does your child like having a routine and dislike surprises or changes?",
        "Does your child crave unusual food?",
        "Does your child get upset when they make mistakes or when things go wrong?",
        "Does your child like things to be orderly and tidy?",
        "Does your child tend to blame others when something goes wrong?",
        "Does your child get extremely cold easily?",
        "Is your child very sensitive to smells, tastes, or textures?",
        "Does your child experience dry skin or hair?",
        "Does your child have stiff joints?",
        "Does your child experience constipation?"
    ],
    "Water": [
        "Does your child have a big imagination and enjoy daydreaming?",
        "Does your child feel comfortable being alone?",
        "Does your child have trouble finishing tasks or feel like giving up?",
        "Does your child take their time doing things?",
        "Does your child have negative thoughts or get stuck in a negative mood?",
        "Does your child struggle with being motivated to do things?",
        "Does your child have difficulty expressing their ideas or emotions?",
        "Does your child have a strong memory?",
        "Does your child experience backaches or low physical stamina?",
        "Does your child crave salty, meats, or hot foods?"
    ]
}

element_advice = {
    "Wood": "Increase drinking water & fluids, give fish oils, prioritize bathing and sleep. Encourage hands-on activities like building or crafting. Allow short movement breaks and let them take leadership roles.",
    "Fire": "Encourage positivity, use humor, and allow social interaction. Include colorful visuals and structured routines. Use dance, music, and role-playing to channel energy constructively.",
    "Earth": "Provide structure, engage in cooking or gardening, and encourage group activities. Avoid excessively cold foods. Support with music, storytelling, and grounding exercises.",
    "Metal": "Ensure predictability, build structured routines, and allow decision-making. Use creative outlets like arts and crafts. Avoid overwhelming stimuli and help them reflect on emotions.",
    "Water": "Encourage self-expression through art, writing, and storytelling. Maintain hydration and prioritize sleep. Use nature walks and meditation to improve focus and calmness."
}

@app.route('/', methods=['GET', 'POST'])
def quiz():
    if request.method == 'POST':
        scores = {"Wood": 0, "Fire": 0, "Earth": 0, "Metal": 0, "Water": 0}
        
        for element, questions in element_questions.items():
            for i, question in enumerate(questions):
                key = f"{element}_{i}"
                scores[element] += int(request.form.get(key, 0))
        
        # Determine the highest-scoring element
        dominant_element = max(scores, key=scores.get)
        advice = element_advice[dominant_element]
        return render_template('result.html', dominant_element=dominant_element, advice=advice, scores=scores)
    
    return render_template('quiz.html', element_questions=element_questions)

if __name__ == '__main__':
    app.run(debug=True)
